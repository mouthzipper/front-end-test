!function(){"use strict";function e(e,t,n){function u(){return t.get("/api/customers/served").then(function(t){e.customersServed=t.data})}function o(){return t.get("/api/customers").then(function(t){e.customers=t.data})}e.customers=[],e.customersServed=[],o(),u(),e.onCustomerAdded=function(t){e.customers.push(t),n(function(){o()}.bind(this),1e3)},e.onCustomerRemoved=function(){o()},e.onCustomerServed=function(){o(),u()}}
e.$inject = ["e", "t", "n"];angular.module("qudini.QueueApp",[]).controller("QueueCtrl",e)}(),function(){"use strict";function e(e){return{restrict:"E",scope:{customer:"=",onRemoved:"&",onServed:"&"},templateUrl:"/customer/customer.html",link:function(t){t.queuedTime=new Date-new Date(t.customer.joinedTime),t.remove=function(){e({method:"DELETE",url:"/api/customer/remove",params:{id:t.customer.id}}).then(function(e){t.onRemoved()()})},t.serve=function(){e({method:"POST",url:"/api/customer/serve",data:{id:t.customer.id}}).then(function(e){t.onServed()()})}}}}
e.$inject = ["e"];angular.module("qudini.QueueApp").directive("customer",e)}(),function(){function e(e){return{restrict:"E",scope:{onAdded:"&"},templateUrl:"/add-customer/add-customer.html",link:function(t){t.products=[{name:"Grammatical advice"},{name:"Magnifying glass repair"},{name:"Cryptography advice"}],t.addCustomer=function(){if(!t.product||!t.name)return void alert("You must select a product and a name");var n={name:t.name,product:t.product,joinedTime:(new Date).toString()};return e.post("/api/customer/add",n).then(function(e){t.onAdded()(n)})}}}}
e.$inject = ["e"];angular.module("qudini.QueueApp").directive("addCustomer",e)}();